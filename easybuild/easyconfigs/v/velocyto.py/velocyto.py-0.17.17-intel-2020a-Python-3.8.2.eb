easyblock = 'PythonBundle'

name = 'velocyto.py'
version = '0.17.17'
versionsuffix = "-Python-%(pyver)s"

homepage = 'http://velocyto.org/velocyto.py/'
description = "Velocyto is a library for the analysis of RNA velocity."

toolchain = {'name': 'intel', 'version': '2020a'}

dependencies = [
    ('Python', '3.8.2'),
    ('SciPy-bundle', '2020.03', versionsuffix),
    ('matplotlib', '3.2.1', versionsuffix),
    ('numba', '0.50.0', versionsuffix),
    ('scikit-learn', '0.23.1', versionsuffix),
    ('h5py', '2.10.0', versionsuffix),
    ('Pysam', '0.16.0.1'),

]

use_pip = True

exts_default_options = {'source_urls': [PYPI_SOURCE]}

exts_list = [
    ('numpy-groupies', '0.9.13', {
        'modulename': 'numpy_groupies',
        'source_tmpl': 'numpy_groupies-%(version)s.tar.gz',
        'checksums': ['7b17b291322353f07c51598512d077e3731da0a048cfa8f738f3460d1ef0658d'],
    }),
    ('loompy', '3.0.6', {
        'checksums': ['58e9763b8ab1af2a4a0e3805d120458b5184fd2b0f3031657ecce33c63ca4c46'],
    }),
    (name, version, {
        'modulename': 'velocyto',
        'source_tmpl': '%(version)s.tar.gz',
        'source_urls': ['https://github.com/velocyto-team/velocyto.py/archive'],
        'checksums': ['2461eabf2ec6b152240c95f7ad8a0a5768a83c72822d9398beec2981732b890d'],
    }),
]

sanity_pip_check = True

sanity_check_paths = {
    'files': ['bin/velocyto'],
    'dirs': ['lib/python%(pyshortver)s/site-packages'],
}

sanity_check_commands = [
    'velocyto'
]

moduleclass = 'bio'
